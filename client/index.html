<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WebSocket Client</title>
</head>
<body>
<h1>Dati dal server via WebSocket</h1>
<div id="data-container">
  <!-- Qui verranno inseriti i dati dal server -->
</div>

<script>
  let ws = new WebSocket(location.origin.replace(/^http/, 'ws'));

  ws.onopen = () => {
    console.log('WebSocket connection established.');
  };

  ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    console.log('Dati ricevuti dal server:', data);
    alert(event)

    // Aggiungi il codice qui per visualizzare i dati nella pagina web
    const dataContainer = document.getElementById('data-container');
    dataContainer.innerHTML = `
      <p>Highest Average Cycle: ${data.highestAverageCycle}</p>
      <p>Highest Hourly Average: ${data.highestHourlyAverage}</p>
      <!-- Aggiungi qui altre informazioni che desideri mostrare -->
    `;
  };

  ws.onclose = () => {
    console.log('WebSocket connection closed.');
  };
</script>
</body>
</html>
